{% extends 'base.html.twig' %}

{% block title %}Mon Panier Gozando{% endblock %}

{% block content %}

    <div class="container">
        <h1 scope="col">Mon panier</h1>
        {% if stockfini %}
            <div class="alert alert-info">{{ stockfini }}</div>
        {% endif %}

        {% if cart|length > 0 %}
            <a href="{{ path('remove_to_cart') }}">
                suprimer tout panier <img src="{{asset('assets/img/delete.png') }}" alt="suprimer tout panier"  height="18px">
            </a>
            <table class="table mt-3">
                <thead>
                <tr>
                    <th scope="col">Produit</th>
                    <th scope="col"></th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Prix</th>
                    <th scope="col">Total</th>
                </tr>
                </thead>
                <tbody>
                {% set total = null %}
                {% for product in cart %}
                    {#  dump(product) #}
                    <tr>
                        <th scope="row">
                            <img src="/uploads/{{ product.product.illustration }}" alt="{{ product.product.name }}" height="75px">
                        </th>
                        <td>
                            {{ product.product.name }}<br/>
                            <small>{{ product.product.subtitle }}</small>
                        </td>

                        <td>
                            <a href="{{ path('add_to_cart', { 'id': product.product.id}) }}">
                                <img src="{{asset('assets/img/plus.png') }}" alt="Ajouter le produit"  height="12px">
                            </a>
                            {{ product.quantity }}
                            <a href="{{ path('decrease_to_cart', { 'id': product.product.id}) }}">
                                <img src="{{asset('assets/img/minus.png') }}" alt="suprimer le produit"  height="12px">
                            </a>
                        </td>

                        <td>{{ product.product.price/100 }}</td>
                        <td>{{ product.product.price*product.quantity/100 }}</td>
                        <td>
                            <a href="{{ path('delete_to_cart', { 'id': product.product.id}) }}">
                                <img src="{{asset('assets/img/delete.png') }}" alt="suprimer le produit"  height="18px">
                            </a>
                        </td>
                    </tr>
                    {% set total = total + product.product.price * product.quantity %}
                {% endfor %}
                </tbody>
            </table>

            <div class="text-right mb-5">
                <b>Nombre total de produit: </b>{{ cart|length}} <br/>
                <b>Total de mon payement: </b>{{ total/100 }} $<br/>
                <a class="">Valider ma panier</a>
            </div>

        {% else %}
            <hr>
            <b>Votre panier est vide!. </b>
        {% endif %}
    </div>


{% endblock %}
